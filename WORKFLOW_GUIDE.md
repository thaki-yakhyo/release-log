# Release Workflow Guide / 릴리스 워크플로우 안내

This guide explains how we develop, prepare, and release using GitHub PRs, release-please, and tag-driven automations.
본 문서는 GitHub PR, release-please, 태그 기반 자동화를 활용한 개발·준비·릴리스 흐름을 간단히 설명합니다.

## Branch Model / 브랜치 모델
- main: production-ready
- dev: integration branch
- release-v*: release stabilization (e.g., release-v2.2.0)
- feature/*: per-feature work

## Daily Development / 일상 개발 흐름
1) Create feature from dev / dev에서 기능 브랜치 생성
```bash
git checkout dev && git pull origin dev
git checkout -b feature/my-feature
```
2) Commit with conventional types / 컨벤션 기반 커밋 타입 사용
- feat, fix, docs, refactor, test, chore
```bash
git commit -m "feat: add new endpoint"
```
3) Open PR to dev and merge after review / dev로 PR 생성 후 리뷰 병합

## Preparing a Release / 릴리스 준비
1) Cut release branch from dev / dev에서 릴리스 브랜치 생성
```bash
git checkout dev && git pull
git checkout -b release-vX.Y.Z
```
2) Test and apply hot fixes on release branch / 테스트 및 필요시 수정 커밋
3) Open PR: release-v* -> main and merge / main으로 PR 생성 후 병합

## Automated Release Flow / 자동 릴리스 흐름
After release-v* merges into main:
- release-please creates a Release PR with version bump and changelog
- You merge the Release PR → GitHub Release is created
- Docker workflow builds and pushes images

release-v*가 main에 병합되면:
- release-please가 버전/체인지로그 포함 Release PR 생성
- Release PR 병합 → GitHub Release 생성
- Docker 워크플로우가 이미지 빌드/배포

## Commit Types & Versioning / 커밋 타입과 버저닝
- feat: minor bump (X.Y → X.Y+1)
- fix: patch bump (X.Y.Z → X.Y.Z+1)
- docs, refactor, test, chore: no bump unless configured
- Breaking change via `feat!` etc. → major bump

## Version Tracking / 버전 관리
- File: `version.txt` (single source of truth)
- Updated automatically via Release PR
- 단일 진실 소스: `version.txt` (Release PR에서 자동 갱신)

## Release Notes / 릴리스 노트
- Generated by release-please and then enhanced to include:
  - Categories (Features, Bug Fixes, Docs, etc.)
  - Commit hash and author (by @user)
- release-please 생성 후 작성자 정보가 자동 추가되도록 향상 처리

## How to Trigger / 트리거 방법
- Push conventional commits to main via PR (feat/fix)
- Merge release-v* → main to publish
- 컨벤션 커밋을 포함한 PR을 main에 병합하면 자동 실행, release-v* 병합 시 실제 배포

## Checklist / 체크리스트
- Conventional commits used? (feat, fix, docs, refactor, test, chore)
- release-v* tested and stable?
- PR approvals completed?
- version.txt reflects upcoming version (via Release PR)?

## Tips / 팁
- Use squash merge for feature PRs to keep history clean
- Keep dev noisy; keep main clean and release-ready
- 기능 PR은 스쿼시 머지로 기록을 간결히, main은 항상 배포 가능 상태로 유지
